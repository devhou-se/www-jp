<style>
.sidebar-content li a { padding: 8px; }
.sidebar-content li:hover { background-color: #FF0000; }
.sidebar-content li:hover .post-title { color: white !important; }
</style>
<input type="checkbox" id="sidebar-toggle" class="sidebar-toggle-checkbox">
<label for="sidebar-toggle" class="sidebar-toggle-label">ブログ投稿</label>
<div class="sidebar-content">
{{ $allAuthors := slice }}
{{ range .Site.RegularPages }}
  {{ $authors := .Param "authors" }}
  {{ if $authors }}
    {{ range $authors }}
      {{ $allAuthors = $allAuthors | append . }}
    {{ end }}
  {{ end }}
{{ end }}
{{ $uniqueAuthors := $allAuthors | uniq | sort }}
{{ if gt (len $uniqueAuthors) 0 }}
<div style="margin-bottom: 16px; padding: 8px;">
  <label for="author-filter" style="display: block; margin-bottom: 4px; font-weight: bold;">著者でフィルタ:</label>
  <select id="author-filter" style="width: 100%; padding: 4px; border: 1px solid #333; background-color: var(--bg-color); color: var(--text-color);">
    <option value="">すべての著者</option>
    {{ range $uniqueAuthors }}
    <option value="{{ . }}">{{ . }}</option>
    {{ end }}
  </select>
  <a id="rss-button" href="/feed.xml" style="display: inline-block; margin-top: 8px; padding: 6px 12px; background-color: #FF6600; color: white; text-decoration: none; border-radius: 4px; font-size: 14px; text-align: center; width: calc(100% - 24px);" title="RSS フィードを購読">
    <svg style="width: 14px; height: 14px; vertical-align: middle; margin-right: 4px; fill: currentColor;" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M6.18,15.64A2.18,2.18 0 0,1 8.36,17.82C8.36,19 7.38,20 6.18,20C5,20 4,19 4,17.82A2.18,2.18 0 0,1 6.18,15.64M4,4.44A15.56,15.56 0 0,1 19.56,20H16.73A12.73,12.73 0 0,0 4,7.27V4.44M4,10.1A9.9,9.9 0 0,1 13.9,20H11.07A7.07,7.07 0 0,0 4,12.93V10.1Z" />
    </svg>
    <span id="rss-button-text">RSS を購読</span>
  </a>
</div>
{{ end }}
{{ range where (.Site.RegularPages.GroupByPublishDate "2006-01-02" "desc") "Key" "ne" "0001-01-01" }}
<div class="date-group">
<h3>{{ .Key }}</h3>
<ul style="padding-left: 0;" class="post-list">
{{ range .Pages }}
    {{ $authors := .Param "authors" }}
    <li {{ if eq $.Page.RelPermalink .RelPermalink }}class="アクティブ"{{ end }} style="list-style: none;" data-authors="{{ if $authors }}{{ delimit $authors "," }}{{ end }}">
      <a href="{{ .RelPermalink }}" style="display: block; color: inherit; text-decoration: none;">
        {{ if $authors }}
          <div style="display: flex; align-items: center;">
            {{ range $index, $author := $authors }}
              {{ if eq $index 0 }}
                <img src="/images/avatars/{{ $author }}.png" alt="{{ $author }}" style="width: 16px; height: 16px; margin-right: 4px; flex-shrink: 0; border: 1px solid #333;">
              {{ end }}
            {{ end }}
            <span>{{ delimit $authors ", " }}</span>
          </div>
        {{ end }}
        <div class="post-title" style="color: {{ if eq $.Page.RelPermalink .RelPermalink }}white{{ else }}#FF0000{{ end }};">{{ .LinkTitle }}</div>
      </a>
    </li>
{{ end }}
</ul>
</div>
{{ end }}
</div>
